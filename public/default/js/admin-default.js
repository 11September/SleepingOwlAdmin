window.columnFilters={},window.columnFilters.range=function(e,a){var t=$(e),n=t.find("input"),i=n.filter(":first"),o=n.filter(":last"),s=t.closest("td").data("index");i.data("ajax-data-name","from"),o.data("ajax-data-name","to"),$.fn.dataTable.ext.search.push(function(e,t,n){if(a.settings()[0].sTableId!=e.sTableId)return!0;var l=a.data()[n][s];void 0!==l["@data-order"]&&(l=l["@data-order"]);var c=i.val(),r=o.val();return i.closest(".datepicker").length>0&&o.closest(".datepicker").length>0?(c=""!=c?i.closest(".datepicker").data("DateTimePicker").getDate():Number.NEGATIVE_INFINITY,r=""!=r?o.closest(".datepicker").data("DateTimePicker").getDate():Number.POSITIVE_INFINITY,l=moment(l)):(l=parseInt(l),c=""!=c?parseInt(c):Number.NEGATIVE_INFINITY,r=""!=r?parseInt(r):Number.POSITIVE_INFINITY),l>=c&&r>=l}),n.on("keyup change",function(){a.draw()})},window.columnFilters.select=function(e,a){var t=$(e),n=t.closest("td").data("index");t.on("change",function(){a.column(n).search(t.val()).draw()})},window.columnFilters.text=function(e,a){var t=$(e),n=t.closest("td").data("index");t.on("keyup change",function(){a.column(n).search(t.val()).draw()})},$(function(){$(".adminCheckboxAll").change(function(){var e=$(this).is(":checked");$(".adminCheckboxRow").prop("checked",e).filter(":first").change()}),$(document).delegate(".adminCheckboxRow","change",function(){var e=[];$(".adminCheckboxRow:checked").each(function(){e.push($(this).val())}),$(".tableActions .btnAction").each(function(){var a=$(this),t=a.data("href")+e.join(",");a.attr("href",t)})})}),$(function(){$(document).delegate(".btn-delete","click",function(e){e.preventDefault();var a=$(this).closest("form");bootbox.confirm(window.admin.lang.table["delete-confirm"],function(e){e&&a.submit()})}),bootbox.setDefaults("locale",window.admin.locale)}),$(function(){$(document).delegate('*[data-toggle="lightbox"]',"click",function(e){e.preventDefault(),$(this).ekkoLightbox({always_show_close:!1})})}),$(function(){$(".input-date").each(function(){$(this).datetimepicker({lang:window.admin.locale})})}),$(function(){$(".input-select").select2()}),$(function(){$(".imageUpload").each(function(e,a){var t=$(a),n=t.closest(".form-group"),i=t.find(".errors"),o=t.find(".no-value"),s=t.find(".has-value"),l=t.find(".thumbnail img.has-value"),c=t.find(".imageValue"),r=new Flow({target:t.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:t.data("token")}});r.assignBrowse(t.find(".imageBrowse"),!1,!0),r.on("filesSubmitted",function(e){r.upload()}),r.on("fileSuccess",function(e,a){r.removeFile(e),i.html(""),n.removeClass("has-error");var t=$.parseJSON(a);l.attr("src",t.url),s.find("span").text(t.value),c.val(t.value),o.addClass("hidden"),s.removeClass("hidden")}),r.on("fileError",function(e,a){r.removeFile(e);var t=$.parseJSON(a),o="";$.each(t,function(e,a){o+='<p class="help-block">'+a+"</p>"}),i.html(o),n.addClass("has-error")}),t.find(".imageRemove").click(function(){c.val(""),o.removeClass("hidden"),s.addClass("hidden")})})}),$(function(){$(".imageUploadMultiple").each(function(e,a){var t=$(a),n=t.closest(".form-group"),i=t.find(".form-group"),o=t.find(".errors"),s=t.find(".imageValue"),l=new Flow({target:t.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:t.data("token")}}),c=function(){var e=[];t.find("img[data-value]").each(function(){e.push($(this).data("value"))}),s.val(e.join(","))};l.assignBrowse(t.find(".imageBrowse")),l.on("filesSubmitted",function(e){l.upload()}),l.on("fileSuccess",function(e,a){l.removeFile(e),o.html(""),n.removeClass("has-error");var t=$.parseJSON(a);i.append('<div class="col-xs-6 col-md-3 imageThumbnail"><div class="thumbnail"><img data-value="'+t.value+'" src="'+t.url+'" /><a href="#" class="imageRemove">Remove</a></div></div>'),c()}),l.on("fileError",function(e,a){l.removeFile(e);var t=$.parseJSON(a),i="";$.each(t,function(e,a){i+='<p class="help-block">'+a+"</p>"}),o.html(i),n.addClass("has-error")}),t.on("click",".imageRemove",function(e){e.preventDefault(),$(this).closest(".imageThumbnail").remove(),c()}),i.sortable({onUpdate:function(){c()}})})}),$(function(){!function(){var e=window.location.href;e=e.replace(window.location.search,""),e=e.replace(/\/create$/,""),e=e.replace(/\/([0-9]+)\/edit/,"");var a=$('#side-menu a[href="'+window.location.href+'"]');a.length||(a=$('#side-menu a[href="'+e+'"]')),a.addClass("active").parents("li").addClass("active").end().parents("ul").addClass("collapse").addClass("in")}(),function(){$("html").tooltip({selector:"[data-toggle=tooltip]",container:"body"})}(),function(){$('input[type="text"]:first').focus()}()}),$(function(){$("#side-menu").metisMenu()}),$(function(){$(window).bind("load resize",function(){topOffset=50,width=this.window.innerWidth>0?this.window.innerWidth:this.screen.width,width<768?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse"),height=this.window.innerHeight>0?this.window.innerHeight:this.screen.height,height-=topOffset,height<1&&(height=1),height>topOffset&&$("#page-wrapper").css("min-height",height+"px")})});